/**
 * å…¥åœºåŠ¨ç”»
 */
import router from '@ohos.router'
import { promptAction } from '@kit.ArkUI';

@Entry
@Component
export struct EnterPage {
  @State isVisibility: boolean = false;

  build() {
    Row() {
      Column({ space: 50 }) {
        // logo
        Row() {
          Image($r('app.media.logo'))
            .width(100)
            .height(100)
        }
        .margin({ top: 30 })

        // welcome
        Column({ space: 20 }) {
          Text($r('app.string.welcome'))
            .fontSize(25)
            .fontWeight(FontWeight.Bold)
            .fontStyle(FontStyle.Italic)
          Text($r('app.string.advertisement'))
            .fontSize(25)
            .fontWeight(FontWeight.Bold)
            .fontStyle(FontStyle.Italic)
        }

        // button
        Row() {
          Button('ğŸ‘‰', { type: ButtonType.Normal, stateEffect: true })
            .fontSize(25)
            .borderRadius(20)
            .backgroundColor($r('app.color.button_background'))
            .width(70)
            .height(70)
            .onClick(() => {
              this.showDialog()
            })
        }

        // loading
        if (this.isVisibility) {
          LoadingProgress()
            .width(50)
            .height(50)
        } else {
          Text()
            .width(50)
            .height(50)
        }
      }
      .width('100%')
    }
    .height('100%')
    .backgroundColor('#F6F6F6')
  }

  //æ˜¾ç¤ºå¯¹è¯æ¡†
  showDialog() {
    AlertDialog.show({
      title: ('æœåŠ¡åè®®å’Œéšç§æ”¿ç­–'),
      message: ('è¯·ä½ åŠ¡å¿…å®¡æ…é˜…è¯»ã€å……åˆ†ç†è§£æœåŠ¡åè®®â€å’Œâ€œéšç§æ”¿ç­–â€å„æ¡æ¬¾ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼šä¸ºäº†å‘æ‚¨æä¾›å¾…åŠæé†’ç­‰æœåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦å‘æ‚¨çš„ç³»ç»Ÿæ—¥å†æ·»åŠ å¾…åŠå†…å®¹ã€‚ä½ å¯ä»¥åœ¨ç³»ç»Ÿè®¾ç½®ä¸­ç®¡ç†å¯¹åº”æƒé™ã€‚ä½ å¯é˜…è¯»ã€ŠæœåŠ¡åè®®ã€‹å’Œã€Šéšç§æ”¿ç­–ã€‹äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚å¦‚åŒæ„è¯·ç‚¹å‡»â€œåŒæ„â€å¼€å§‹æ¥å—æˆ‘ä»¬çš„æœåŠ¡ã€‚'),
      autoCancel: true,
      alignment: DialogAlignment.Center,
      // åç§»é‡
      offset: { dx: 0, dy: -30 },
      // ä¸»è¦æŒ‰é’®
      primaryButton: {
        value: ('æ‹’ç»'),
        action: () => {
          router.back()
        }
      },
      // æ¬¡è¦æŒ‰é’®
      secondaryButton: {
        value: ('åŒæ„'),
        action: () => {
          this.isVisibility = true
          promptAction.showToast({
            message: $r('app.string.welcome'),
          })
          // å»¶æ—¶è·³è½¬é¡µé¢
          setTimeout(() => {
            router.replaceUrl({
              url: 'pages/MainPage',
            })
          }, 2000)
        }
      }
    })
  }
}